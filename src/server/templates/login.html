{% extends 'base.html' %}

{% set title = 'STEEZ™ - Login' %}

{% block script %}
<script>
    function glitchText() {
        let heading = document.getElementById('heading');

        function generateRandomText() {
            let Es = ["é", "è", "ê", "ë", "ē", "ė", "ę"];
            let Os = ["ó", "ò", "ô", "ö", "õ", "ō"];
            let randomEs = Es[Math.floor(Math.random() * Es.length)] + Es[Math.floor(Math.random() * Es.length)];
            let randomOs = Os[Math.floor(Math.random() * Os.length)];
            return `ST${randomEs}Z<sup>TM</sup> - L${randomOs}GIN`;
        }

        let iterations = 9;
        let interval = 80;

        let randomHtmls = [];

        for (let i = 0; i < iterations; i++) {
            randomHtmls.push(generateRandomText());
        }

        let reversedRandomHtmls = randomHtmls.slice().reverse();

        var allRandomHtmls = randomHtmls.concat(reversedRandomHtmls);
        allRandomHtmls.push('STEEZ<sup>TM</sup> - LOGIN');


        allRandomHtmls.forEach((randomHtml, index) => {
            setTimeout(() => {
                heading.innerHTML = randomHtml;
            }, index * interval);
        });
    }

    document.addEventListener('DOMContentLoaded', () => {
        setTimeout(() => {
            glitchText();
        }, 14000);
    });
</script>
{% endblock %}

{% block style %}
<style>
    .fs {
        font-size: 7rem;
    }
</style>
{% endblock %}

{% block body %}
<div class="d-flex justify-content-center align-items-center" style="height: 100vh;">
    <div class="container-sm card rounded rounded-0 p-5" style="max-width: 1000px;">
        <div class="row">
            <div class="col bg-transparent">
                <div class="card-body bg-transparent">
                    <h1 class="card-title horizon-font text-center" id="heading">STEEZ<sup>TM</sup> - LOGIN</h1>
                    <form action="{{ url_for('login_route') }}" method="POST" class="mt-5">
                        {{ form.csrf_token }}
                        <div class="input-group mb-2">
                            {{ form.email(class="form-control rounded rounded-0", id="email", placeholder="Enter the Email", **{"aria-label": "Enter the Email", "aria-describedby": "email"}) }}
                        </div>
                        {% if form.email.errors %}
                            <div class="alert alert-danger mt-2" role="alert">
                                {% for error in form.email.errors %}
                                    <i class="bi bi-exclamation-circle"></i> {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}

                        <div class="input-group mb-2">
                            {{ form.password(class="form-control rounded rounded-0", id="password", placeholder="Enter the password", **{"aria-label": "Enter the password", "aria-describedby": "show-password"}) }}
                        </div>
                        {% if form.password.errors %}
                            <div class="alert alert-danger mt-2" role="alert">
                                {% for error in form.password.errors %}
                                    <i class="bi bi-exclamation-circle"></i> {{ error }}
                                {%endfor%}
                            </div>
                        {% endif %}

                        <div class="text-center">
                            <p class="fs-5 mt-3">Don't have an account? <a href="{{ url_for('register') }}" class="link-secondary">Register here</a></p>
                            {% if error %}
                            <p class="alert alert-danger" role="alert"><i class="bi bi-exclamation-circle"></i> {{ error }}</p>
                            {% endif %}
                            {{ form.submit(class="btn btn-secondary rounded rounded-0") }}
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
