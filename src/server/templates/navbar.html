{% macro navbar(current_user) -%}
<script>
    function loadSearchFunction() {
        document.getElementById('searchBar').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                const searchBar = document.getElementById('searchBar');
                const searchQuery = searchBar.value;
                window.location.href = `/search/${searchQuery}`;
            }
        });
    }

    document.addEventListener('DOMContentLoaded', () => {
        loadSearchFunction();
    });

</script>

<nav class="navbar navbar-expand-lg bg-body-tertiary mt-3">
    <div class="container-fluid d-flex justify-content-between">
        <div>
            <a class="nav-link active horizon-font fs-4" aria-current="page" href="{{ url_for('home') }}">STEEZ<sup>TM</sup></a>
        </div>
        <form class="m-auto" role="search">
            <input class="form-control me-2 rounded rounded-0 search-input" type="search" id="searchBar" placeholder="Search STEEZâ„¢" aria-label="Search" style="width: 500px; height: 45px">
        </form>
        {% if current_user.is_authenticated %}
            <div class="d-flex">
                <p class="me-3"><a class="nav-link" href="{{ url_for('order_history') }}">Order History</a></p>
                <a class="nav-link me-3" href="{{ url_for('checkout') }}">Checkout {% set total = current_user.cart.count %}{% if total %}<sup>{{ total }}</sup>{% endif %}</a>
                <a class="nav-link" href="{{ url_for('logout') }}">Logout</a>
            </div>
        {% else %}
            <div class="d-flex">
                <a class="nav-link me-3" href="{{ url_for('login_route') }}">Login</a>
                <a class="nav-link" href="{{ url_for('register') }}">Register</a>
            </div>
        {% endif %}
    </div>
</nav>

{%- endmacro %}
